---
title: 'SDK –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏'
description: '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ SDK –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Love&Pay'
icon: 'code'
---

## –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π TypeScript SDK

<Card title="loveandpay-sdk" icon="npm" href="https://www.npmjs.com/package/loveandpay-sdk">
  –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK –¥–ª—è **TypeScript/JavaScript** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ npm, yarn –∏–ª–∏ pnpm.
</Card>

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

<CodeGroup>

```bash npm
npm install loveandpay-sdk
```

```bash yarn
yarn add loveandpay-sdk
```

```bash pnpm
pnpm add loveandpay-sdk
```

```bash bun
bun add loveandpay-sdk
```

</CodeGroup>

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```typescript
import { LoveAndPay } from 'loveandpay-sdk';

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
const client = new LoveAndPay({
  apiKey: process.env.LOVEANDPAY_API_KEY!,
});

// –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
const invoice = await client.invoices.create({
  amount: 1500,
  currency: 'RUB',
  description: '–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ #12345',
});

console.log(`–°—Å—ã–ª–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã: ${invoice.paymentLink}`);
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SDK

<CardGroup cols={2}>
  <Card title="–ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è" icon="shield-check">
    TypeScript —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  </Card>
  <Card title="–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ" icon="wand-magic-sparkles">
    IDE –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  </Card>
  <Card title="–ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π" icon="feather">
    –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ç–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π fetch
  </Card>
  <Card title="ESM –∏ CommonJS" icon="code-branch">
    –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –º–æ–¥—É–ª–µ–π
  </Card>
</CardGroup>

## API Reference

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```typescript
import { LoveAndPay } from 'loveandpay-sdk';

const client = new LoveAndPay({
  apiKey: 'pk_live_xxx',           // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
  baseUrl: 'https://loveandpay.io/api/v1', // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  timeout: 30000,                  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º—Å
});
```

### –°—á–µ—Ç–∞ (Invoices)

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
const invoice = await client.invoices.create({
  amount: 1500,
  currency: 'RUB',
  description: '–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞',
  customer: {
    email: 'client@example.com',
    name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
    phone: '+79991234567',
  },
  metadata: {
    orderId: '12345',
  },
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—á—ë—Ç–∞ –ø–æ ID
const invoice = await client.invoices.get('invoice-id');

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—á–µ—Ç–æ–≤
const { data: invoices, pagination } = await client.invoices.list({
  status: 'PAID',
  limit: 10,
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ QR-–∫–æ–¥–∞
const qr = await client.invoices.getQRCode('invoice-id', {
  size: 300,
  format: 'png',
});

// –û—Ç–º–µ–Ω–∞ —Å—á—ë—Ç–∞
const cancelled = await client.invoices.cancel('invoice-id', '–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã');
```

### –í–µ–±—Ö—É–∫–∏ (Webhooks)

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞
const webhook = await client.webhooks.create({
  url: 'https://yoursite.com/webhook',
  events: ['INVOICE_PAID', 'INVOICE_EXPIRED'],
});

console.log(`–°–µ–∫—Ä–µ—Ç: ${webhook.secret}`); // –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ!

// –°–ø–∏—Å–æ–∫ –≤–µ–±—Ö—É–∫–æ–≤
const { data: webhooks } = await client.webhooks.list();

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞ –ø–æ ID
const webhook = await client.webhooks.get('webhook-id');

// –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞
await client.webhooks.delete('webhook-id');
```

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –≤–µ–±—Ö—É–∫–∞

```typescript
import express from 'express';
import { LoveAndPay } from 'loveandpay-sdk';

const app = express();
const client = new LoveAndPay({ apiKey: 'your-api-key' });

app.post('/webhook', express.raw({ type: 'application/json' }), (req, res) => {
  const signature = req.headers['x-webhook-signature'] as string;
  const rawBody = req.body.toString();

  // –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏
  const isValid = client.webhooks.verifySignature(
    rawBody,
    signature,
    process.env.WEBHOOK_SECRET!
  );

  if (!isValid) {
    return res.status(401).json({ error: 'Invalid signature' });
  }

  // –ü–∞—Ä—Å–∏–Ω–≥ payload
  const payload = client.webhooks.parsePayload(rawBody);

  switch (payload.event) {
    case 'INVOICE_PAID':
      console.log(`–°—á—ë—Ç ${payload.data.id} –æ–ø–ª–∞—á–µ–Ω!`);
      break;
    case 'INVOICE_EXPIRED':
      console.log(`–°—á—ë—Ç ${payload.data.id} –∏—Å—Ç—ë–∫`);
      break;
  }

  res.json({ success: true });
});

// –ò–ª–∏ –≤—Å—ë –≤ –æ–¥–Ω–æ–º —à–∞–≥–µ —Å verifyAndParse:
app.post('/webhook2', express.raw({ type: 'application/json' }), (req, res) => {
  try {
    const payload = client.webhooks.verifyAndParse(
      req.body.toString(),
      req.headers['x-webhook-signature'] as string,
      process.env.WEBHOOK_SECRET!
    );

    // payload —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω
    console.log(payload.event, payload.data);
    res.json({ success: true });
  } catch (error) {
    res.status(401).json({ error: 'Invalid signature' });
  }
});
```

#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞)

```typescript
// –î–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π –±–µ–∑ Node.js crypto
const isValid = await client.webhooks.verifySignatureAsync(
  rawBody,
  signature,
  secret
);
```

### KYC –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
const session = await client.kyc.createSession({
  level: 'basic',
  redirectUrl: 'https://yoursite.com/kyc-complete',
  metadata: { userId: 'user-123' },
});

console.log(`–°—Å—ã–ª–∫–∞ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏: ${session.verificationUrl}`);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
const status = await client.kyc.getSession('session-id');

if (status.status === 'COMPLETED') {
  console.log('–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞!');
}

// –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
const { data: sessions, pagination } = await client.kyc.listSessions({
  limit: 10,
  status: 'COMPLETED',
});
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

```typescript
// –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
const analytics = await client.analytics.get({
  from: '2024-01-01',
  to: '2024-01-31',
});

console.log(`–í—Å–µ–≥–æ —Å—á–µ—Ç–æ–≤: ${analytics.summary.totalInvoices}`);
console.log(`–û–ø–ª–∞—á–µ–Ω–æ: ${analytics.summary.totalAmount} RUB`);
console.log(`–ö–æ–Ω–≤–µ—Ä—Å–∏—è: ${analytics.summary.conversionRate}%`);

// –ë—ã—Å—Ç—Ä—ã–µ –º–µ—Ç–æ–¥—ã
const today = await client.analytics.today();
const week = await client.analytics.lastWeek();
const month = await client.analytics.lastMonth();
```

### Batch –æ–ø–µ—Ä–∞—Ü–∏–∏

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—á–µ—Ç–æ–≤
const result = await client.batch.createInvoices([
  { amount: 1000, description: '–ó–∞–∫–∞–∑ 1' },
  { amount: 2000, description: '–ó–∞–∫–∞–∑ 2' },
  { amount: 3000, description: '–ó–∞–∫–∞–∑ 3' },
]);

console.log(`–£—Å–ø–µ—à–Ω–æ: ${result.successful.length}`);
console.log(`–û—à–∏–±–∫–∏: ${result.failed.length}`);
```

### Identy (AI –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π)

<Note>
  Identy API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ `https://identy.loveandpay.io` –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
</Note>

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const categories = await client.identy.getCategories();

// –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ (Base64)
const result = await client.identy.validate(imageBase64, 'image/png');

if (result.isValid && result.confidenceScore > 80) {
  console.log('–ü–æ–¥–ø–∏—Å—å –ø–æ–¥–ª–∏–Ω–Ω–∞—è!');
} else {
  console.log(`–ü—Ä–æ–±–ª–µ–º–∞: ${result.description}`);
  console.log('–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:', result.recommendations);
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞ (Node.js)
import { readFileSync } from 'fs';
const file = new Blob([readFileSync('signature.png')]);
const result = await client.identy.validateFile(file);
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```typescript
import { LoveAndPay, LoveAndPayError } from 'loveandpay-sdk';

try {
  const invoice = await client.invoices.get('invalid-id');
} catch (error) {
  if (error instanceof LoveAndPayError) {
    console.log('–ö–æ–¥ –æ—à–∏–±–∫–∏:', error.statusCode);
    console.log('–¢–∏–ø:', error.error);
    console.log('–°–æ–æ–±—â–µ–Ω–∏–µ:', error.message);
  }
}
```

## –¢–∏–ø—ã

–í—Å–µ —Ç–∏–ø—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ –ø–∞–∫–µ—Ç–∞:

```typescript
import type {
  Invoice,
  InvoiceStatus,
  CreateInvoiceParams,
  Webhook,
  WebhookEvent,
  WebhookPayload,
  KYCSession,
  AnalyticsSummary,
  SignatureValidationResult,
  LoveAndPayConfig,
  LoveAndPayError,
} from 'loveandpay-sdk';
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
|-----------|-----------|
| Node.js 18+ | ‚úÖ |
| Bun | ‚úÖ |
| Deno | ‚úÖ |
| Edge Functions (Vercel, Cloudflare) | ‚úÖ |
| –ë—Ä–∞—É–∑–µ—Ä | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ Identy API |

## –ü–ª–∞–Ω—ã –ø–æ SDK

<Steps>
  <Step title="TypeScript SDK">
    **–°—Ç–∞—Ç—É—Å:** –î–æ—Å—Ç—É–ø–µ–Ω ‚úÖ

    –ü–µ—Ä–≤—ã–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
  </Step>
  <Step title="Python SDK">
    **–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è üìã

    –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Django, FastAPI, Flask
  </Step>
  <Step title="PHP SDK">
    **–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è üìã

    –î–ª—è Laravel, Symfony –∏ –¥—Ä—É–≥–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
  </Step>
  <Step title="Go SDK">
    **–°—Ç–∞—Ç—É—Å:** –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è üí≠

    –î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
  </Step>
</Steps>

## –°—Å—ã–ª–∫–∏

<CardGroup cols={2}>
  <Card title="npm" icon="npm" href="https://www.npmjs.com/package/loveandpay-sdk">
    –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞–∫–µ—Ç–∞ –Ω–∞ npm
  </Card>
  <Card title="GitHub" icon="github" href="https://github.com/loveandpay/sdk">
    –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ issues
  </Card>
</CardGroup>
