---
title: 'Валидация подписи (Файл)'
description: 'Загрузка файла изображения для анализа подписи'
api: 'POST https://identy.loveandpay.io/api/Signature/validate/upload'
---

## Валидация через загрузку файла

Загружает файл изображения напрямую и возвращает результат AI-валидации подписи.

<Info>
  Это открытый эндпоинт — аутентификация не требуется.
</Info>

### Параметры запроса

<ParamField body="file" type="file" required>
  Файл изображения подписи. Максимальный размер: **10 MB**
</ParamField>

### Поддерживаемые форматы

- PNG (`image/png`)
- JPEG (`image/jpeg`)
- GIF (`image/gif`)
- WebP (`image/webp`)

### Пример запроса

<CodeGroup>

```bash cURL
curl -X POST "https://identy.loveandpay.io/api/Signature/validate/upload" \
  -F "file=@signature.png"
```

```javascript Node.js
const fs = require('fs');
const FormData = require('form-data');

const form = new FormData();
form.append('file', fs.createReadStream('signature.png'));

const response = await fetch('https://identy.loveandpay.io/api/Signature/validate/upload', {
  method: 'POST',
  body: form
});

const result = await response.json();
console.log(`Валидна: ${result.isValid}, Уверенность: ${result.confidenceScore}%`);
```

```javascript Browser (JavaScript)
// HTML: <input type="file" id="signatureInput" accept="image/*" />

const fileInput = document.getElementById('signatureInput');
const file = fileInput.files[0];

const formData = new FormData();
formData.append('file', file);

const response = await fetch('https://identy.loveandpay.io/api/Signature/validate/upload', {
  method: 'POST',
  body: formData
});

const result = await response.json();

if (result.isValid) {
  alert(`Подпись подлинная! Уверенность: ${result.confidenceScore}%`);
} else {
  alert(`Проблема: ${result.description}`);
}
```

```python Python
import requests

with open('signature.png', 'rb') as f:
    response = requests.post(
        'https://identy.loveandpay.io/api/Signature/validate/upload',
        files={'file': ('signature.png', f, 'image/png')}
    )

result = response.json()
print(f"Валидна: {result['isValid']}, Уверенность: {result['confidenceScore']}%")
```

```csharp C#
using var client = new HttpClient();
using var content = new MultipartFormDataContent();
using var fileStream = File.OpenRead("signature.png");

content.Add(new StreamContent(fileStream), "file", "signature.png");

var response = await client.PostAsync(
    "https://identy.loveandpay.io/api/Signature/validate/upload",
    content
);

var result = await response.Content.ReadFromJsonAsync<SignatureValidationResponse>();
Console.WriteLine($"Валидна: {result.IsValid}, Уверенность: {result.ConfidenceScore}%");
```

</CodeGroup>

### Пример ответа

<ResponseField name="isValid" type="boolean">
  Результат валидации: `true` — подпись подлинная, `false` — недействительная
</ResponseField>

<ResponseField name="confidenceScore" type="integer">
  Оценка уверенности AI от 0 до 100
</ResponseField>

<ResponseField name="category" type="integer">
  Числовой код категории подписи (0-8)
</ResponseField>

<ResponseField name="description" type="string">
  Текстовое описание результата анализа
</ResponseField>

<ResponseField name="issues" type="array">
  Массив обнаруженных проблем
</ResponseField>

<ResponseField name="recommendations" type="array">
  Массив рекомендаций для пользователя
</ResponseField>

```json Успешный ответ (200)
{
  "isValid": true,
  "confidenceScore": 89,
  "category": 1,
  "description": "Подпись распознана как подлинная рукописная подпись",
  "issues": [],
  "recommendations": []
}
```

```json Низкое качество (200)
{
  "isValid": false,
  "confidenceScore": 45,
  "category": 7,
  "description": "Качество изображения слишком низкое для достоверного анализа",
  "issues": [
    "Изображение размыто",
    "Недостаточное разрешение"
  ],
  "recommendations": [
    "Используйте изображение с разрешением не менее 300 DPI",
    "Убедитесь что фото не размыто",
    "Обеспечьте хорошее освещение при съёмке"
  ]
}
```

### Пример интеграции в форму

```html
<!DOCTYPE html>
<html>
<head>
  <title>Проверка подписи</title>
</head>
<body>
  <h1>Загрузите изображение подписи</h1>

  <input type="file" id="signatureFile" accept="image/*" />
  <button onclick="validateSignature()">Проверить</button>

  <div id="result"></div>

  <script>
    async function validateSignature() {
      const fileInput = document.getElementById('signatureFile');
      const resultDiv = document.getElementById('result');

      if (!fileInput.files[0]) {
        alert('Выберите файл');
        return;
      }

      const formData = new FormData();
      formData.append('file', fileInput.files[0]);

      resultDiv.innerHTML = 'Анализ...';

      try {
        const response = await fetch(
          'https://identy.loveandpay.io/api/Signature/validate/upload',
          { method: 'POST', body: formData }
        );

        const result = await response.json();

        resultDiv.innerHTML = `
          <p><strong>Результат:</strong> ${result.isValid ? '✅ Подлинная' : '❌ Недействительная'}</p>
          <p><strong>Уверенность:</strong> ${result.confidenceScore}%</p>
          <p><strong>Описание:</strong> ${result.description}</p>
          ${result.issues.length ? '<p><strong>Проблемы:</strong> ' + result.issues.join(', ') + '</p>' : ''}
        `;
      } catch (error) {
        resultDiv.innerHTML = 'Ошибка: ' + error.message;
      }
    }
  </script>
</body>
</html>
```

### Ошибки

| Код | Описание |
|-----|----------|
| 400 | Файл не загружен или неверный формат |
| 413 | Файл превышает 10 MB |
| 500 | Внутренняя ошибка сервера |
